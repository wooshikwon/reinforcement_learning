name: united-senior-run
description: "Homework 3 Section 4 - DQN CartPole Experiments"

resources:
  cluster: vessl-kr-a100-80g-sxm
  preset: gpu-a100-80g-small

image: quay.io/vessl-ai/torch:2.3.1-cuda12.1-r5

import:
  /code:
    git:
      url: https://github.com/wooshikwon/reinforcement_learning

run:
  - workdir: /code/hw3
    command: |
      pip install "gymnasium[classic-control]" tensorboard==2.10.0 tensorboardX==2.5.1 matplotlib==3.5.3 opencv-python-headless==4.6.0.66 tqdm==4.66.1 pyyaml==6.0.1 ale-py
      pip install -e .
      python gcb6206/scripts/run_hw3.py -cfg experiments/dqn/cartpole.yaml --seed 1
      python gcb6206/scripts/run_hw3.py -cfg experiments/dqn/cartpole_lr_5e-2.yaml --seed 1
      mkdir -p /output && cp -r data/ /output/
